<%- include('partials/header', { title: 'H√≥a ƒë∆°n ƒë·ªãnh k·ª≥' , additionalCSS: ['/css/dashboard.css'] }) %>
  <div class="app-container">
    <%- include('partials/sidebar', { currentPage: 'recurring-bills' }) %>
      <main class="main-content">
        <header class="top-bar">
          <h1>H√≥a ƒê∆°n ƒê·ªãnh K·ª≥</h1>
          <div class="user-info">
            <span id="user-name">User</span>
            <button class="btn-logout">ƒêƒÉng xu·∫•t</button>
          </div>
        </header>
        <div class="content">

          <div class="stats-grid">
            <div class="stat-card">
              <h3>T·ªïng H√≥a ƒê∆°n Th√°ng</h3>
              <p class="stat-value" id="totalMonthly">0 VNƒê</p>
            </div>
            <div class="stat-card">
              <h3>S·∫Øp ƒê·∫øn H·∫°n</h3>
              <p class="stat-value" id="upcomingCount">0</p>
            </div>
            <div class="stat-card">
              <h3>Qu√° H·∫°n</h3>
              <p class="stat-value" id="overdueCount">0</p>
            </div>
            <div class="stat-card">
              <h3>Ho·∫°t ƒê·ªông</h3>
              <p class="stat-value" id="activeCount">0</p>
            </div>
          </div>

          <div class="card">
            <div class="card-header">
              <h2>Danh S√°ch H√≥a ƒê∆°n</h2>
              <button class="btn btn-primary" onclick="showAddBillForm()">+ Th√™m H√≥a ƒê∆°n</button>
            </div>
            <div class="card-body">
              <div class="filters">
                <select id="typeFilter" onchange="filterBills()">
                  <option value="">T·∫•t c·∫£ lo·∫°i</option>
                  <option value="rent">Ti·ªÅn nh√†</option>
                  <option value="electricity">ƒêi·ªán</option>
                  <option value="water">N∆∞·ªõc</option>
                  <option value="internet">Internet</option>
                  <option value="parking">G·ª≠i xe</option>
                  <option value="garbage">R√°c</option>
                  <option value="other">Kh√°c</option>
                </select>
                <select id="statusFilter" onchange="filterBills()">
                  <option value="true">ƒêang ho·∫°t ƒë·ªông</option>
                  <option value="false">ƒê√£ d·ª´ng</option>
                  <option value="">T·∫•t c·∫£</option>
                </select>
              </div>

              <div id="billsList" class="table-responsive">
                <p class="loading">ƒêang t·∫£i d·ªØ li·ªáu...</p>
              </div>
            </div>
          </div>

          <div class="card">
            <div class="card-header">
              <h2>üîî S·∫Øp ƒê·∫øn H·∫°n (7 ng√†y)</h2>
            </div>
            <div class="card-body">
              <div id="upcomingBills" class="table-responsive">
                <p class="loading">ƒêang t·∫£i d·ªØ li·ªáu...</p>
              </div>
            </div>
          </div>
        </div>
      </main>
  </div>

  <!-- Add/Edit Bill Modal -->
  <div id="billModal" class="modal" style="display: none;">
    <div class="modal-content">
      <span class="close" onclick="closeBillModal()">&times;</span>
      <h2 id="modalTitle">Th√™m H√≥a ƒê∆°n ƒê·ªãnh K·ª≥</h2>
      <form id="billForm">
        <input type="hidden" id="billId">

        <div class="form-group">
          <label for="name">T√™n h√≥a ƒë∆°n *</label>
          <input type="text" id="name" required>
        </div>

        <div class="form-group">
          <label for="type">Lo·∫°i *</label>
          <select id="type" required>
            <option value="rent">Ti·ªÅn nh√†</option>
            <option value="electricity">ƒêi·ªán</option>
            <option value="water">N∆∞·ªõc</option>
            <option value="internet">Internet</option>
            <option value="parking">G·ª≠i xe</option>
            <option value="garbage">R√°c</option>
            <option value="other">Kh√°c</option>
          </select>
        </div>

        <div class="form-group">
          <label for="amount">S·ªë ti·ªÅn *</label>
          <input type="number" id="amount" required min="0">
        </div>

        <div class="form-group">
          <label for="frequency">T·∫ßn su·∫•t *</label>
          <select id="frequency" required>
            <option value="monthly">H√†ng th√°ng</option>
            <option value="weekly">H√†ng tu·∫ßn</option>
            <option value="quarterly">H√†ng qu√Ω</option>
            <option value="yearly">H√†ng nƒÉm</option>
          </select>
        </div>

        <div class="form-group">
          <label for="dueDay">Ng√†y ƒë·∫øn h·∫°n (1-31)</label>
          <input type="number" id="dueDay" min="1" max="31">
        </div>

        <div class="form-group">
          <label for="nextDueDate">Ng√†y ƒë·∫øn h·∫°n ti·∫øp theo *</label>
          <input type="date" id="nextDueDate" required>
        </div>

        <div class="form-group">
          <label for="reminderDays">Nh·∫Øc nh·ªü tr∆∞·ªõc (ng√†y)</label>
          <input type="number" id="reminderDays" value="3" min="0">
        </div>

        <div class="form-group">
          <label for="autoDebit">
            <input type="checkbox" id="autoDebit">
            T·ª± ƒë·ªông thanh to√°n
          </label>
        </div>

        <div class="form-group">
          <label for="notes">Ghi ch√∫</label>
          <textarea id="notes" rows="3"></textarea>
        </div>

        <div class="form-actions">
          <button type="button" class="btn btn-secondary" onclick="closeBillModal()">H·ªßy</button>
          <button type="submit" class="btn btn-primary">L∆∞u</button>
        </div>
      </form>
    </div>
  </div>

  <%- include('partials/footer', { additionalJS: [ '/js/recurring-bills.js' ] }) %>
