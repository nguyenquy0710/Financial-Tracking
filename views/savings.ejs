<%- include('partials/header', { title: 'Tiết kiệm' , additionalCSS: ['/css/dashboard.css'] }) %>
  <div class="app-container">
    <%- include('partials/sidebar', { currentPage: 'savings' }) %>
      <main class="main-content">
        <header class="top-bar">
          <h1>Quản lý tiết kiệm</h1>
          <div class="user-info">
            <span id="user-name">User</span>
            <button class="btn-logout">Đăng xuất</button>
          </div>
        </header>
        <div class="content">
          <div class="stats-grid">
            <div class="stat-card">
              <h3>Gửi Mẹ</h3>
              <p class="stat-value" id="totalMother">0 VNĐ</p>
            </div>
            <div class="stat-card">
              <h3>Gửi Quỹ</h3>
              <p class="stat-value" id="totalFund">0 VNĐ</p>
            </div>
            <div class="stat-card">
              <h3>Tổng Cộng</h3>
              <p class="stat-value" id="totalSavings">0 VNĐ</p>
            </div>
          </div>

          <div class="card">
            <div class="card-header">
              <h2>Danh Sách Tiết Kiệm</h2>
              <button class="btn btn-primary" onclick="showAddSavingForm()">+ Thêm Tiết Kiệm</button>
            </div>
            <div class="card-body">
              <div class="filters">
                <select id="typeFilter" onchange="filterSavings()">
                  <option value="">Tất cả loại</option>
                  <option value="mother">Gửi Mẹ</option>
                  <option value="fund">Gửi Quỹ</option>
                </select>
                <input type="month" id="monthFilter" onchange="filterSavings()">
              </div>
              <div id="savingsList" class="table-responsive">
                <p class="loading">Đang tải dữ liệu...</p>
              </div>
            </div>
          </div>
        </div>
      </main>
  </div>

  <!-- Add/Edit Saving Modal -->
  <div id="savingModal" class="modal" style="display: none;">
    <div class="modal-content">
      <span class="close" onclick="closeSavingModal()">&times;</span>
      <h2 id="modalTitle">Thêm Tiết Kiệm</h2>
      <form id="savingForm">
        <input type="hidden" id="savingId">

        <div class="form-group">
          <label for="month">Tháng *</label>
          <input type="month" id="month" required>
        </div>

        <div class="form-group">
          <label for="type">Loại *</label>
          <select id="type" required>
            <option value="mother">Gửi Mẹ</option>
            <option value="fund">Gửi Quỹ</option>
          </select>
        </div>

        <div class="form-group">
          <label for="depositDate">Ngày gửi *</label>
          <input type="date" id="depositDate" required>
        </div>

        <div class="form-group">
          <label for="amount">Số tiền *</label>
          <input type="number" id="amount" required min="0">
        </div>

        <div class="form-group">
          <label for="accountNumber">Số tài khoản</label>
          <input type="text" id="accountNumber">
        </div>

        <div class="form-group">
          <label for="recipient">Người nhận</label>
          <input type="text" id="recipient">
        </div>

        <div class="form-group">
          <label for="notes">Ghi chú</label>
          <textarea id="notes" rows="3"></textarea>
        </div>

        <div class="form-actions">
          <button type="button" class="btn btn-secondary" onclick="closeSavingModal()">Hủy</button>
          <button type="submit" class="btn btn-primary">Lưu</button>
        </div>
      </form>
    </div>
  </div>

  <%- include('partials/footer', { additionalJS: [ '/js/savings.js' ] }) %>
