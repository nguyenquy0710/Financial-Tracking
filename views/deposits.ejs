<%- include('partials/header', { title: 'Ti·ªÅn g·ª≠i' , additionalCSS: ['/css/dashboard.css'] }) %>
  <div class="app-container">
    <%- include('partials/sidebar', { currentPage: 'deposits' }) %>
      <main class="main-content">
        <header class="top-bar">
          <h1>S·ªï Ti·∫øt Ki·ªám / ƒê·∫ßu T∆∞</h1>
          <div class="user-info">
            <span id="user-name">User</span>
            <button class="btn-logout">ƒêƒÉng xu·∫•t</button>
          </div>
        </header>
        <div class="content">

          <div class="stats-grid">
            <div class="stat-card">
              <h3>T·ªïng G·ªëc</h3>
              <p class="stat-value" id="totalPrincipal">0 VNƒê</p>
            </div>
            <div class="stat-card">
              <h3>T·ªïng L√£i</h3>
              <p class="stat-value" id="totalInterest">0 VNƒê</p>
            </div>
            <div class="stat-card">
              <h3>T·ªïng C·ªông</h3>
              <p class="stat-value" id="totalAmount">0 VNƒê</p>
            </div>
            <div class="stat-card">
              <h3>L√£i Su·∫•t TB</h3>
              <p class="stat-value" id="avgRate">0%</p>
            </div>
          </div>

          <div class="card">
            <div class="card-header">
              <h2>Danh S√°ch S·ªï Ti·∫øt Ki·ªám</h2>
              <button class="btn btn-primary" onclick="showAddDepositForm()">+ Th√™m S·ªï</button>
            </div>
            <div class="card-body">
              <div class="filters">
                <input type="text" id="bankFilter" placeholder="L·ªçc theo ng√¢n h√†ng" onchange="filterDeposits()">
                <select id="statusFilter" onchange="filterDeposits()">
                  <option value="">T·∫•t c·∫£ tr·∫°ng th√°i</option>
                  <option value="active">ƒêang ho·∫°t ƒë·ªông</option>
                  <option value="matured">ƒê√£ ƒë·∫øn h·∫°n</option>
                  <option value="closed">ƒê√£ ƒë√≥ng</option>
                </select>
              </div>

              <div id="depositsList" class="table-responsive">
                <p class="loading">ƒêang t·∫£i d·ªØ li·ªáu...</p>
              </div>
            </div>
          </div>

          <div class="card">
            <div class="card-header">
              <h2>üîî S·∫Øp ƒê√°o H·∫°n (30 ng√†y)</h2>
            </div>
            <div class="card-body">
              <div id="upcomingDeposits" class="table-responsive">
                <p class="loading">ƒêang t·∫£i d·ªØ li·ªáu...</p>
              </div>
            </div>
          </div>
        </div>
      </main>
  </div>

  <!-- Add/Edit Deposit Modal -->
  <div id="depositModal" class="modal" style="display: none;">
    <div class="modal-content">
      <span class="close" onclick="closeDepositModal()">&times;</span>
      <h2 id="modalTitle">Th√™m S·ªï Ti·∫øt Ki·ªám</h2>
      <form id="depositForm">
        <input type="hidden" id="depositId">

        <div class="form-group">
          <label for="bank">Ng√¢n h√†ng *</label>
          <input type="text" id="bank" required>
        </div>

        <div class="form-group">
          <label for="accountType">Lo·∫°i t√†i kho·∫£n</label>
          <input type="text" id="accountType">
        </div>

        <div class="form-group">
          <label for="accountNumber">S·ªë t√†i kho·∫£n *</label>
          <input type="text" id="accountNumber" required>
        </div>

        <div class="form-group">
          <label for="accountName">T√™n t√†i kho·∫£n</label>
          <input type="text" id="accountName">
        </div>

        <div class="form-group">
          <label for="fundType">Lo·∫°i qu·ªπ</label>
          <input type="text" id="fundType">
        </div>

        <div class="form-group">
          <label for="principalAmount">S·ªë ti·ªÅn g·ªëc *</label>
          <input type="number" id="principalAmount" required min="0">
        </div>

        <div class="form-group">
          <label for="interestRate">L√£i su·∫•t (%/nƒÉm) *</label>
          <input type="number" id="interestRate" required min="0" step="0.01">
        </div>

        <div class="form-group">
          <label for="termMonths">K·ª≥ h·∫°n (th√°ng)</label>
          <input type="number" id="termMonths" min="0">
        </div>

        <div class="form-group">
          <label for="startDate">Ng√†y b·∫Øt ƒë·∫ßu</label>
          <input type="date" id="startDate">
        </div>

        <div class="form-group">
          <label for="maturityDate">Ng√†y ƒë√°o h·∫°n</label>
          <input type="date" id="maturityDate">
        </div>

        <div class="form-group">
          <label for="interestAmount">S·ªë ti·ªÅn l√£i d·ª± ki·∫øn</label>
          <input type="number" id="interestAmount" min="0">
        </div>

        <div class="form-group">
          <label for="status">Tr·∫°ng th√°i</label>
          <select id="status">
            <option value="active">ƒêang ho·∫°t ƒë·ªông</option>
            <option value="matured">ƒê√£ ƒë·∫øn h·∫°n</option>
            <option value="closed">ƒê√£ ƒë√≥ng</option>
          </select>
        </div>

        <div class="form-group">
          <label for="notes">Ghi ch√∫</label>
          <textarea id="notes" rows="3"></textarea>
        </div>

        <div class="form-actions">
          <button type="button" class="btn btn-secondary" onclick="closeDepositModal()">H·ªßy</button>
          <button type="submit" class="btn btn-primary">L∆∞u</button>
        </div>
      </form>
    </div>
  </div>

  <%- include('partials/footer', { additionalJS: [ '/js/deposits.js' ] }) %>
