<%- include('partials/header', { title: 'C√†i ƒë·∫∑t' , additionalCSS: ['/css/dashboard.css'] }) %>

  <div class="app-container">
    <%- include('partials/sidebar', { currentPage: 'settings' }) %>
      <main class="main-content">
        <header class="top-bar">
          <h1>C√†i ƒë·∫∑t</h1>
          <div class="user-info">
            <span id="user-name">User</span>
            <button class="btn-logout">ƒêƒÉng xu·∫•t</button>
          </div>
        </header>
        <div class="content">
          <div class="card">
            <div class="card-header">
              <h2>üë§ Th√¥ng tin c√° nh√¢n</h2>
            </div>
            <div class="card-body">
              <div id="userInfo">
                <p class="loading">ƒêang t·∫£i d·ªØ li·ªáu...</p>
              </div>
            </div>
          </div>

          <div class="card">
            <div class="card-header">
              <h2>üè¶ T√†i kho·∫£n ng√¢n h√†ng</h2>
              <button class="btn btn-primary" onclick="showAddAccountForm()">+ Th√™m T√†i Kho·∫£n</button>
            </div>
            <div class="card-body">
              <div id="bankAccountsList">
                <p class="loading">ƒêang t·∫£i d·ªØ li·ªáu...</p>
              </div>
            </div>
          </div>

          <div class="card">
            <div class="card-header">
              <h2>üé® T√πy ch·ªânh</h2>
            </div>
            <div class="card-body">
              <div class="settings-form">
                <div class="form-group">
                  <label for="language">Ng√¥n ng·ªØ</label>
                  <select id="language" class="form-control">
                    <option value="vi">Ti·∫øng Vi·ªát</option>
                    <option value="en">English</option>
                  </select>
                </div>
                <div class="form-group">
                  <label for="currency">ƒê∆°n v·ªã ti·ªÅn t·ªá</label>
                  <select id="currency" class="form-control">
                    <option value="VND">VNƒê</option>
                    <option value="USD">USD</option>
                  </select>
                </div>
                <button class="btn btn-primary" onclick="savePreferences()">L∆∞u T√πy Ch·ªânh</button>
              </div>
            </div>
          </div>
        </div>
      </main>
  </div>

  <!-- Add/Edit Bank Account Modal -->
  <div id="accountModal" class="modal" style="display: none;">
    <div class="modal-content">
      <span class="close" onclick="closeAccountModal()">&times;</span>
      <h2 id="modalTitle">Th√™m T√†i Kho·∫£n Ng√¢n H√†ng</h2>
      <form id="accountForm">
        <input type="hidden" id="accountId">

        <div class="form-group">
          <label for="bank">Ng√¢n h√†ng *</label>
          <select id="bank" required>
            <option value="">-- Ch·ªçn ng√¢n h√†ng --</option>
          </select>
        </div>

        <div class="form-group">
          <label for="accountHolder">Ch·ªß t√†i kho·∫£n *</label>
          <input type="text" id="accountHolder" required>
        </div>

        <div class="form-group">
          <label for="accountNumber">S·ªë t√†i kho·∫£n *</label>
          <input type="text" id="accountNumber" required>
        </div>

        <div class="form-group">
          <label for="branch">Chi nh√°nh</label>
          <input type="text" id="branch">
        </div>

        <div class="form-group">
          <label for="identifier">M√£ ƒë·ªãnh danh</label>
          <input type="text" id="identifier" placeholder="T√™n g·ª£i nh·ªõ ho·∫∑c m√£ ri√™ng">
        </div>

        <div class="form-group">
          <label for="isDefault">
            <input type="checkbox" id="isDefault">
            ƒê·∫∑t l√†m t√†i kho·∫£n m·∫∑c ƒë·ªãnh
          </label>
        </div>

        <div class="form-group">
          <label for="isActive">
            <input type="checkbox" id="isActive" checked>
            ƒêang ho·∫°t ƒë·ªông
          </label>
        </div>

        <div class="form-group">
          <label for="notes">Ghi ch√∫</label>
          <textarea id="notes" rows="3"></textarea>
        </div>

        <div class="form-actions">
          <button type="button" class="btn btn-secondary" onclick="closeAccountModal()">H·ªßy</button>
          <button type="submit" class="btn btn-primary">L∆∞u</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Edit Profile Modal -->
  <div id="profileModal" class="modal" style="display: none;">
    <div class="modal-content">
      <span class="close" onclick="closeProfileModal()">&times;</span>
      <h2>Ch·ªânh S·ª≠a Th√¥ng Tin C√° Nh√¢n</h2>
      <form id="editProfileForm">
        <div class="form-group">
          <label for="editProfileName">T√™n *</label>
          <input type="text" id="editProfileName" required>
        </div>

        <div class="form-group">
          <label for="editProfilePhone">S·ªë ƒëi·ªán tho·∫°i</label>
          <input type="tel" id="editProfilePhone">
        </div>

        <div class="form-actions">
          <button type="button" class="btn btn-secondary" onclick="closeProfileModal()">H·ªßy</button>
          <button type="submit" class="btn btn-primary">C·∫≠p nh·∫≠t</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Change Password Modal -->
  <div id="passwordModal" class="modal" style="display: none;">
    <div class="modal-content">
      <span class="close" onclick="closePasswordModal()">&times;</span>
      <h2>ƒê·ªïi M·∫≠t Kh·∫©u</h2>
      <form id="changePasswordForm">
        <div class="form-group">
          <label for="currentPassword">M·∫≠t kh·∫©u hi·ªán t·∫°i *</label>
          <input type="password" id="currentPassword" required>
        </div>

        <div class="form-group">
          <label for="newPassword">M·∫≠t kh·∫©u m·ªõi *</label>
          <input type="password" id="newPassword" required minlength="6">
        </div>

        <div class="form-group">
          <label for="confirmPassword">X√°c nh·∫≠n m·∫≠t kh·∫©u m·ªõi *</label>
          <input type="password" id="confirmPassword" required minlength="6">
        </div>

        <div class="form-actions">
          <button type="button" class="btn btn-secondary" onclick="closePasswordModal()">H·ªßy</button>
          <button type="submit" class="btn btn-primary">ƒê·ªïi m·∫≠t kh·∫©u</button>
        </div>
      </form>
    </div>
  </div>

  <%- include('partials/footer', { additionalJS: [ '/js/settings.js' ] }) %>
